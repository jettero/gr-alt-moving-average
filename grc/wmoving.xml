<?xml version="1.0"?>

<block>
    <name>Weighted Moving Average</name>
    <key>wmoving</key>
    <category>Level Controllers</category>
    <import>import gr_alt_moving_average</import>

    <!-- NOTE: took me a while to figure out $placeHolder and #directive blah#
         are python-cheetah template lingo; help's knowing that for sure -->

    <make>gr_alt_moving_average.wmoving($type=#echo ($alpha,$samples)[int($type.i)]#)</make>
    <callback>set_$type(#echo ($alpha,$samples)[int($type.i)]#)</callback>

	<param>
		<name>Weight Type</name>
		<key>type</key>
        <value>alpha</value>
		<type>enum</type>
		<option>
			<name>Alpha</name>
			<key>alpha</key>
            <opt>a:none</opt>
            <opt>s:all</opt>
            <opt>i:0</opt>
        </option>
        <option>
			<name>Samples</name>
			<key>samples</key>
            <opt>a:all</opt>
            <opt>s:none</opt>
            <opt>i:1</opt>
		</option>
    </param>

    <param>
        <name>Alpha</name>
        <key>alpha</key>
        <value>0.5</value>
        <type>float</type>
        <hide>$type.a</hide>
    </param>

    <param>
        <name>Samples</name>
        <key>samples</key>
        <value>1000</value>
        <type>int</type>
        <hide>$type.s</hide>
    </param>

	<sink>
		<name>in</name>
        <type>float</type>
        <vlen>1</vlen>
	</sink>

	<source>
        <name>out</name>
		<type>float</type>
        <vlen>1</vlen>
	</source>

    <doc>
Lorem ipsum dolor sit amet, at sea mnesarchum repudiandae. Vix te quidam dolorum, est duis reformidans referrentur cu. Exerci oblique insolens mel an, vix appetere adipiscing ea, ad sed idque consul adipisci. Dolorem molestiae cum ad. Autem percipit delicatissimi ex vim.

Maiorum splendide ea cum, ex qui stet quaerendum. No eum saepe scaevola consectetuer, cu has postulant expetendis. Vim nominavi phaedrum ex, vim minim officiis id, tempor labore offendit eu vis. No agam oporteat sapientem ius, his singulis salutatus et. Congue oblique delicata ius ne, est et meis primis, case convenire has eu. Ex mea tale zril populo, homero expetenda efficiendi ei mel.

Sea quot ullum debet id. An elit veritus ius. Te has stet aperiam periculis, ullum doctus persecuti ex vis. Id mea putent animal scripta, mea alia mucius salutatus in, vel dicta partem praesent id.

Ut eum doming accusam, cum et case idque molestiae. Usu graece verterem te. Est eu denique quaerendum, sed nemore melius ullamcorper ei. Est ei dico iusto maluisset. In diceret corrumpit duo, augue quidam possit quo no. Eu eos nostro reformidans.

Accumsan imperdiet eum ex, an est rebum aliquip quaerendum, ea corpora lucilius nec. Eos no omnium similique, ius diceret aliquam commune et, est id dicat epicuri. Per augue inermis eu, est ne alia erant harum. Urbanitas similique nam eu, vim mentitum cotidieque voluptatibus no. In vis ferri detraxit. Ne nulla ornatus fabellas duo.
    </doc>

</block>
